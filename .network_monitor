"""
Script Name: network_monitor.py
Purpose: TO check if network and related projects are up
Created on: 11/06/2021 22:30:00
Modified on: 09/05/2022 22:30:00
Revision: 1
GitHub Repository : https://github.com/sashuu6/workspace-environment
"""

import urllib.request
import socket


def __check_site_up(host) -> bool:
    """ Definition to check url is up

    host: hostname/URL of site
    """
    try:
        urllib.request.urlopen(host)
        return True
    except:
        return False


def main() -> None:
    """ Definition main
    """
    # check internet
    internet_access = __check_site_up("http://google.com")
    print(f"Internet Access: {internet_access}")

    # Check if GitHub is down
    github_access = __check_site_up("http://github.com")
    print(f"Github: \t {github_access}")

    print("\nNetwork Information:-")

    # Fetch local IP
    local_ip_connection = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    local_ip_connection.connect(("8.8.8.8", 80))
    local_ip_address = local_ip_connection.getsockname()[0]
    print(f"Local IP: \t {local_ip_address}")

    # Fetch Global IP if internet available
    if internet_access:
        global_ip_address = urllib.request.urlopen(
            "https://api.ipify.org").read().decode("utf-8")
        print(f"Global IP: \t {global_ip_address}")


if __name__ == "__main__":
    main()
